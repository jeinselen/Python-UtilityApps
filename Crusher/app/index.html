<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Crusher</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ══════════════════════════════════════════════════════════════
     FRONT FACE
     ══════════════════════════════════════════════════════════════ -->
<div id="front">

  <!-- ── Controls row ──────────────────────────────────────────── -->
  <div id="controls-row">

    <!-- Color count -->
    <div id="colors-group">
      <label class="field-label">Colors</label>
      <input type="text" id="colors" value="256" maxlength="3"
             oninput="updateColorsInput(event)"
             onkeydown="colorsKeyDown(event)"
             onfocus="selectAll(event)">
    </div>

    <!-- Slider -->
    <input type="range" id="slider" min="8" max="256" step="1" value="256"
           oninput="updateSlider()">

    <!-- Checkboxes -->
    <div id="checks-group">
      <label class="check-label" id="dither-label">
        <input type="checkbox" id="ditherInput" onchange="updateDither()">
        <span>dither</span>
      </label>
      <label class="check-label" id="ie6-label">
        <input type="checkbox" id="ie6Input" onchange="updateIE6()">
        <span>IE6 fix</span>
      </label>
    </div>

  </div>

  <!-- ── Drop zone ─────────────────────────────────────────────── -->
  <div id="drop-zone"
       ondrop="dragDrop(event)"
       ondragover="dragOver(event)"
       ondragenter="dragEnter(event)"
       ondragleave="dragLeave(event)">
    <div id="drop-icon">⬇</div>
    <div id="drop-label">Drop PNGs here</div>
    <div id="drop-detail">reduces color depth with pngquant</div>
  </div>

  <!-- ── Bottom bar ────────────────────────────────────────────── -->
  <div id="front-bar">
    <button id="settings-btn" onclick="showBack()" title="Settings">⚙ Settings</button>
  </div>

</div><!-- /front -->


<!-- ══════════════════════════════════════════════════════════════
     SUCCESS PANEL
     ══════════════════════════════════════════════════════════════ -->
<div id="success-panel" class="state-panel hidden">
  <div class="state-icon success-icon">✓</div>
  <div id="success-text"  class="state-title"></div>
  <div id="success-detail" class="state-detail"></div>
  <button class="state-btn" onclick="showFront()">Done</button>
</div>


<!-- ══════════════════════════════════════════════════════════════
     FAIL PANEL
     ══════════════════════════════════════════════════════════════ -->
<div id="fail-panel" class="state-panel hidden">
  <div class="state-icon fail-icon">✕</div>
  <div id="fail-text"  class="state-title"></div>
  <div id="fail-detail" class="state-detail"></div>
  <button class="state-btn" onclick="showFront()">Try Again</button>
</div>


<!-- ══════════════════════════════════════════════════════════════
     WRONG TYPE PANEL
     ══════════════════════════════════════════════════════════════ -->
<div id="wrong-panel" class="state-panel hidden">
  <div class="state-icon wrong-icon">⚠</div>
  <div id="wrong-text"  class="state-title">Wrong file type</div>
  <div id="wrong-detail" class="state-detail"></div>
  <button class="state-btn" onclick="showFront()">Try Again</button>
</div>


<!-- ══════════════════════════════════════════════════════════════
     PROCESSING PANEL
     ══════════════════════════════════════════════════════════════ -->
<div id="processing-panel" class="state-panel hidden">
  <div class="spinner"></div>
  <div class="state-title">Crushing…</div>
  <div id="processing-detail" class="state-detail"></div>
</div>


<!-- ══════════════════════════════════════════════════════════════
     BACK FACE  –  Settings
     ══════════════════════════════════════════════════════════════ -->
<div id="back" class="hidden">

  <div id="back-header">
    <span>Crusher — Settings</span>
    <button onclick="showFront()">Done</button>
  </div>

  <div id="back-body">

    <!-- pngquant path -->
    <div class="setting-row">
      <label class="setting-label">pngquant path</label>
      <div class="setting-input-row">
        <input type="text" id="loc" value="/opt/homebrew/bin/"
               oninput="updateLoc()"
               onfocus="selectAll(event)"
               placeholder="/opt/homebrew/bin/">
        <button id="check-btn" onclick="checkPngquant()">Check</button>
      </div>
      <div id="pq-status" class="setting-hint"></div>
    </div>

    <!-- Speed / quality -->
    <div class="setting-row">
      <label class="setting-label">Speed / quality</label>
      <select id="quality" onchange="updateQuality()">
        <option value="0">Fastest</option>
        <option value="1">Fast</option>
        <option value="2" selected>Balanced</option>
        <option value="3">Slow</option>
        <option value="4">Best quality</option>
      </select>
    </div>

    <!-- Overwrite -->
    <div class="setting-row">
      <label class="setting-label">Existing files</label>
      <select id="overwrite" onchange="updateOverwrite()">
        <option value="0">Skip (keep original)</option>
        <option value="1" selected>Overwrite</option>
      </select>
    </div>

    <!-- Output suffixes -->
    <div class="setting-row">
      <label class="setting-label">Suffix — colors</label>
      <input type="text" id="name" value=".%d" maxlength="20"
             oninput="updateName()"
             onfocus="selectAll(event)"
             placeholder=".%d">
      <div class="setting-hint">%d = color count  e.g. image.256.png</div>
    </div>

    <div class="setting-row">
      <label class="setting-label">Suffix — dither</label>
      <input type="text" id="nameDither" value=".dither" maxlength="20"
             oninput="updateNameDither()"
             onfocus="selectAll(event)"
             placeholder=".dither">
    </div>

    <div class="setting-row">
      <label class="setting-label">Suffix — IE6</label>
      <input type="text" id="nameIE6" value=".ie6" maxlength="20"
             oninput="updateNameIE6()"
             onfocus="selectAll(event)"
             placeholder=".ie6">
    </div>

    <div class="setting-row about-row">
      <a href="#" onclick="openWebsite(); return false;" id="iaian7-link">
        iaian7.com – original widget
      </a>
    </div>

  </div><!-- /back-body -->
</div><!-- /back -->


<script src="app.js"></script>
</body>
</html>
